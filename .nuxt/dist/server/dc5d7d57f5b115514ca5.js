exports.ids=[2],exports.modules={42:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o(40),d=o.n(n);let r=o(41);function l(t){if(t.headers.cookie&&t.headers.cookie){const e=r.parse(t.headers.cookie).access_token;if(!e)return;const o=d()(e);if(!o)return;return o}}},46:function(t,e,o){"use strict";o.r(e);var n=o(4),d=o.n(n),r=(o(14),o(21),o(42)),l={data:()=>({posts:[],admin:!1,modal:!1,postID:"",adminEmail:"",postIndex:"",showData:!1}),created(){d.a.auth().onAuthStateChanged(t=>{t?(this.admin=!0,this.adminEmail=t.email.substring(0,t.email.lastIndexOf("@"))):this.admin=!1})},async asyncData({req:t,redirect:e}){Object(r.a)(t)||(console.log("redirecting server"),e("/login"));let o=[];return await d.a.firestore().collection("blogData").orderBy("postID","desc").get().then(t=>{t.forEach(t=>{o.push(t.data())})}),{posts:o}},methods:{deletePost(t,e){this.modal=!0,this.postID=t,this.postIndex=e},deleteModalOkay(){this.modal=!1,d.a.firestore().collection("blogData").where("postID","==",this.postID).get().then(t=>{t.forEach(t=>{t.ref.delete(),this.posts.splice(this.postIndex,1)})})},closeModal(){this.modal=!1},async downloadImg(){for(var t=this,i=0;i<t.posts.length;i++)await d.a.storage().ref(t.posts[i].postID).getDownloadURL().then((function(e){t.posts[i].img=e})).catch((function(t){console.log(t)}));this.showData=!0}},mounted(){this.downloadImg()}},c=o(1),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[t.modal?t._ssrNode('<div class="modalWrap">',"</div>",[t._ssrNode('<div class="modalContent">',"</div>",[t._ssrNode('<div class="modalClose">',"</div>",[o("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),t._ssrNode(' <div class="headline center">Confirm delete</div> <div class="middle"><button class="button primaryBtn">Cancel</button> <button class="button errorBtn">Delete</button></div>')],2)]):t._e(),t._ssrNode(' <div class="adminInfo">\n    Welcome,\n    <span>'+t._ssrEscape(t._s(t.adminEmail))+"</span></div> "),t._l(t.posts,(function(e,n){return t.showData?t._ssrNode('<div class="posts">',"</div>",[t._ssrNode('<div class="imgCover">',"</div>",[o("nuxt-link",{attrs:{to:{name:"posts-postID",params:{postID:e.postID}}}},[o("img",{attrs:{src:e.img,alt:e.name}})])],1),t._ssrNode(" "),t._ssrNode('<div class="Infos infoList">',"</div>",[o("nuxt-link",{staticClass:"postName",attrs:{to:{name:"posts-postID",params:{postID:e.postID}}}},[t._v(t._s(e.name.split(" ").slice(0,15).join(" ")))]),t._ssrNode(' <div class="postDate">'+t._ssrEscape("Date: "+t._s(e.createDate.slice(0,-3)))+'</div> <div class="postInfo">'+t._s(e.info.split(" ").slice(0,16).join(" ")+" ...")+"</div> "),o("nuxt-link",{staticClass:"button primaryBtn",attrs:{to:{name:"posts-edit-editPost",params:{editPost:e.postID}}}},[t._v("Edit")]),t._ssrNode(" "+(t.admin?'<div class="button errorBtn">Delete</div>':"\x3c!----\x3e"))],2)],2):t._e()}))],2)}),[],!1,null,null,"b2edf506");e.default=component.exports}};