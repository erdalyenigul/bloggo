exports.ids=[7],exports.modules={42:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var r=o(40),n=o.n(r);let l=o(41);function c(t){if(t.headers.cookie&&t.headers.cookie){const e=l.parse(t.headers.cookie).access_token;if(!e)return;const o=n()(e);if(!o)return;return o}}},43:function(t,e,o){t.exports=o.p+"img/e4b6323.gif"},49:function(t,e,o){"use strict";o.r(e);var r=o(4),n=o.n(r),l=(o(14),o(21),o(42)),c={async asyncData({req:t,redirect:e,route:o}){Object(l.a)(t)||e("/login");let r=[];return await n.a.firestore().collection("blogData").where("postID","==",o.params.editPost).get().then(t=>{t.forEach(t=>{r=t.data()})}),{post:r}},data:()=>({loading:!1,coverImg:"",post:[],postID:"",postInfo:"",editorOption:{modules:{toolbar:[[{size:["normal","large","huge"]},"bold","italic","underline","strike"],["clean"],["blockquote","link","image","video"],[{color:[]},{background:[]}]]}}}),methods:{onEditorChange({editor:t,html:html,text:text}){this.postInfo=html},nameSet(t){this.post.name=t.target.value},editPost(){n.a.firestore().collection("blogData").where("postID","==",this.$route.params.editPost).get().then(t=>{t.forEach(t=>{t.ref.update({postID:this.$route.params.editPost,name:this.post.name,info:this.postInfo}).then(()=>{this.$router.push({name:"posts-postID",params:{postID:this.$route.params.editPost}})})})})},uploadImage(t){this.loading=!0;let e=n.a.storage().ref(this.postID);if(t.target.files[0]){e.delete().then((function(){})).catch((function(t){}));let o=t.target.files[0],r=e.put(o);r.on("state_changed",t=>{},t=>{console.log(t)},()=>{r.snapshot.ref.getDownloadURL().then(t=>{this.coverImg=t,this.loading=!1})})}},async coverImgPreview(){var t=this;await n.a.storage().ref(this.$route.params.editPost).getDownloadURL().then((function(e){t.coverImg=e})).catch((function(t){console.log(t.message)})),this.showData=!0}},mounted(){this.coverImgPreview()}},d=o(1),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._ssrNode('<h1 class="headline">Edit post</h1> <div class="coverImg"><button type="file" class="button primaryBtn">Cover image</button> '+(t.loading?'<div class="loading"><img'+t._ssrAttr("src",o(43))+" alt></div>":"\x3c!----\x3e")+" <img"+t._ssrAttr("src",t.coverImg)+"></div> "),t._ssrNode('<form class="newPostForm">',"</form>",[t._ssrNode('<div class="nameInput"><input type="text" placeholder="Headline"'+t._ssrAttr("value",t.post.name)+"></div> "),t._ssrNode('<div class="editorWrap">',"</div>",[r("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditor",value:t.editorOption,expression:"editorOption",arg:"myQuillEditor"}],staticClass:"quill-editor",attrs:{content:t.post.info},on:{change:function(e){return t.onEditorChange(e)}}},[])]),t._ssrNode(' <button type="submit" class="button primaryBtn">Save</button>')],2),t._ssrNode(' <input type="file" class="fileUploadInput">')],2)}),[],!1,null,null,"473b55a2");e.default=component.exports}};